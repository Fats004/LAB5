*
 * Lab5.c
 *
 * Created: 4/14/2024 11:33:27 AM
 * Author : Fatima
 */ 

# define F_CPU 16000000
#include <avr/io.h>
#include <avr/interrupt.h>
#include <stdint.h>
#include <util/delay.h>
#include "ADC/ADC.h"
#include "PWM1/PWM1.h"

uint8_t POT1 = 0;
uint8_t duty = 0;

int main(void)
{	
	setPWM1fastA(0, _8bits, 1024);
	
	setADC(externo, izquierda, 7);
	
	controlADC(1, 0, 1, 128);
	
	sei();
	
	//DDRD |= (1 << DDD6);
	
	//TCCR0A = 0;
	//TCCR0B = 0;
	
	//TCCR0A = (1 << COM0A1);

	//TCCR0A |= (1 << WGM00) | (1 << WGM01);

	//TCCR0B |= (1 << CS00) | (1 << CS02);
	
	//OCR1A = 127;
	
    while (1) 
    {
		ADCSRA |= (1 << ADSC);
		
		updateDutyA1(POT1/6);
		
		_delay_ms(10);
    }
}

ISR(ADC_vect){
	 
	POT1 = ADCH;
	
	ADCSRA |= (1 << ADIF); //Apagar la bandera de ADC
}

